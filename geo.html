<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Activité Géométrique</title>
  <style>
    body {
      font-family: 'Mabry Pro', sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 2rem;
      text-align: center;
    }
    h1 {
      font-family: 'Androgy Demo', sans-serif;
      color: #3a86ff;
    }
    .container {
      display: flex;
      justify-content: center;
      gap: 4rem;
      flex-wrap: wrap;
      margin-top: 2rem;
    }
    .shapes, .figure {
      background: white;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      min-width: 250px;
      min-height: 250px;
    }
    .shape {
      margin: 10px;
      cursor: grab;
    }
    .dropzone {
      border: 2px dashed #a074a3;
      width: 120px;
      height: 120px;
      margin: 10px;
      display: inline-block;
      vertical-align: top;
      position: relative;
    }
    .dropzone.filled {
      border-style: solid;
    }
    svg {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>

<h1>Activité Géométrique : Compose la figure</h1>

<div class="container">
  <!-- Zone des formes disponibles -->
  <div class="shapes">
    <h2>Formes disponibles</h2>
    <div class="shape" draggable="true" data-kind="square">
      <svg viewBox="0 0 100 100">
        <rect x="10" y="10" width="80" height="80" fill="#dde1f0" stroke="#a074a3" stroke-width="2"/>
      </svg>
      <div>Carré</div>
    </div>
    <div class="shape" draggable="true" data-kind="rectangle">
      <svg viewBox="0 0 120 60">
        <rect x="0" y="0" width="120" height="60" fill="#dde1f0" stroke="#a074a3" stroke-width="2"/>
      </svg>
      <div>Rectangle</div>
    </div>
    <div class="shape" draggable="true" data-kind="circle">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="40" fill="#dde1f0" stroke="#a074a3" stroke-width="2"/>
      </svg>
      <div>Cercle</div>
    </div>
    <div class="shape" draggable="true" data-kind="triangle">
      <svg viewBox="0 0 100 100">
        <polygon points="50,0 0,100 100,100" fill="#dde1f0" stroke="#a074a3" stroke-width="2"/>
      </svg>
      <div>Triangle</div>
    </div>
    <div class="shape" draggable="true" data-kind="hemicircle-left">
      <svg viewBox="0 0 100 50">
        <path d="M100,50 A50,50 0 0,0 0,50 Z" fill="#dde1f0" stroke="#a074a3" stroke-width="2"/>
      </svg>
      <div>Demi-cercle gauche</div>
    </div>
    <div class="shape" draggable="true" data-kind="hemicircle-right">
      <svg viewBox="0 0 100 50">
        <path d="M0,50 A50,50 0 0,1 100,50 Z" fill="#dde1f0" stroke="#a074a3" stroke-width="2"/>
      </svg>
      <div>Demi-cercle droit</div>
    </div>
  </div>

  <!-- Zone figure à compléter -->
  <div class="figure" id="figure">
    <h2>Figure cible</h2>
    <div class="dropzone" data-expected="rectangle"></div>
    <div class="dropzone" data-expected="hemicircle-left"></div>
    <div class="dropzone" data-expected="hemicircle-right"></div>
  </div>
</div>

<script>
  const shapes = document.querySelectorAll('.shape');
  const dropzones = document.querySelectorAll('.dropzone');

  let draggedShape = null;

  shapes.forEach(shape => {
    shape.addEventListener('dragstart', e => {
      draggedShape = shape;
    });
  });

  dropzones.forEach(zone => {
    zone.addEventListener('dragover', e => e.preventDefault());
    zone.addEventListener('drop', e => {
      if (!draggedShape) return;
      // Supprimer la précédente si nécessaire
      if (zone.firstChild) zone.firstChild.remove();
      // Cloner le SVG de la forme
      const svgClone = draggedShape.querySelector('svg').cloneNode(true);
      zone.appendChild(svgClone);
      zone.classList.add('filled');
      // Vérification simple
      if(zone.dataset.expected === draggedShape.dataset.kind){
        zone.style.backgroundColor = "#d4f8d4"; // correct
      } else {
        zone.style.backgroundColor = "#f8d4d4"; // incorrect
      }
      draggedShape = null;
    });
  });
</script>

</body>
</html>
