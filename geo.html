<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Figure composée</title>

<!-- Polices -->
<link href="https://fonts.googleapis.com/css2?family=Androgy+Demo&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Mabry+Pro&display=swap" rel="stylesheet" />

<style>
  :root {
    --primary: #3a86ff;
    --secondary: #8338ec;
    --background: #f0f4f8;
    --border-radius: 8px;
    --figure-fill: #34d399; /* couleur de remplissage */
    --figure-stroke: #1e4bb8; /* couleur des contours */
    --transition: 0.3s ease;
  }

  body {
    font-family: 'Mabry Pro', sans-serif;
    background: var(--background);
    color: var(--primary);
    margin: 2rem;
  }

  h1 {
    font-family: 'Androgy Demo', sans-serif;
    color: var(--primary);
    text-align: center;
    margin-bottom: 1rem;
  }

  a.back {
    display: inline-block;
    margin-bottom: 1.5rem;
    font-weight: 600;
    color: var(--primary);
    text-decoration: none;
    border: 2px solid var(--primary);
    padding: 0.5rem 1rem;
    border-radius: var(--border-radius);
    transition: background-color var(--transition), color var(--transition);
  }
  a.back:hover {
    background-color: var(--primary);
    color: white;
  }

  #workspace {
    position: relative;
    width: 90%;
    max-width: 800px;
    height: 400px;
    margin: 0 auto;
    border: 2px dashed var(--primary);
    border-radius: var(--border-radius);
    background: white;
  }

  .composed-figure {
    position: absolute;
    cursor: grab;
    user-select: none;
  }

  .composed-figure.dragging {
    opacity: 0.7;
    cursor: grabbing;
  }
</style>
</head>
<body>

<h1>Figure composée</h1>
<a href="index.html" class="back">← Retour à la page principale</a>
<p style="text-align:center;">Déplace la figure dans le canevas</p>

<div id="workspace"></div>

<script>
const workspace = document.getElementById('workspace');

// Créer la figure composée (rectangle + 2 demi-cercles)
function createComposedFigure(x, y) {
  const svgNS = "http://www.w3.org/2000/svg";
  const figure = document.createElementNS(svgNS, "svg");
  figure.setAttribute("width", 200);
  figure.setAttribute("height", 100);
  figure.classList.add('composed-figure');
  figure.style.left = x + 'px';
  figure.style.top = y + 'px';

  // Rectangle
  const rect = document.createElementNS(svgNS, "rect");
  rect.setAttribute("x", 40);
  rect.setAttribute("y", 0);
  rect.setAttribute("width", 120);
  rect.setAttribute("height", 100);
  rect.setAttribute("fill", "var(--figure-fill)");
  rect.setAttribute("stroke", "var(--figure-stroke)");
  rect.setAttribute("stroke-width", 4);
  figure.appendChild(rect);

  // Demi-cercle gauche
  const leftArc = document.createElementNS(svgNS, "path");
  leftArc.setAttribute("d", "M40,0 A50,50 0 0,0 40,100 L40,0 Z");
  leftArc.setAttribute("fill", "var(--figure-fill)");
  leftArc.setAttribute("stroke", "var(--figure-stroke)");
  leftArc.setAttribute("stroke-width", 4);
  figure.appendChild(leftArc);

  // Demi-cercle droite
  const rightArc = document.createElementNS(svgNS, "path");
  rightArc.setAttribute("d", "M160,0 A50,50 0 0,1 160,100 L160,0 Z");
  rightArc.setAttribute("fill", "var(--figure-fill)");
  rightArc.setAttribute("stroke", "var(--figure-stroke)");
  rightArc.setAttribute("stroke-width", 4);
  figure.appendChild(rightArc);

  workspace.appendChild(figure);

  makeDraggable(figure);
}

// Fonction de drag & drop
function makeDraggable(el) {
  let offsetX, offsetY;
  el.addEventListener('mousedown', e => {
    el.classList.add('dragging');
    offsetX = e.clientX - el.offsetLeft;
    offsetY = e.clientY - el.offsetTop;

    function move(e) {
      el.style.left = e.clientX - offsetX + 'px';
      el.style.top = e.clientY - offsetY + 'px';
    }

    function up() {
      document.removeEventListener('mousemove', move);
      document.removeEventListener('mouseup', up);
      el.classList.remove('dragging');
    }

    document.addEventListener('mousemove', move);
    document.addEventListener('mouseup', up);
  });
}

// Créer la figure initiale
createComposedFigure(50, 50);

</script>

</body>
</html>
