<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calcul d'Aire - Formules</title>

<!-- Polices -->
<link href="https://fonts.googleapis.com/css2?family=Androgy+Demo&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Mabry+Pro&display=swap" rel="stylesheet" />

<style>
:root {
  --primary-color: #3a86ff;
  --background-color: #f0f4f8;
  --accent: #8338ec;
  --text-color: #212529;
  --tile-bg: white;
  --tile-border: 2px solid rgba(0,0,0,0.08);
  --radius: 10px;
  --transition: 0.25s ease;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Mabry Pro', sans-serif;
  background: var(--background-color);
  padding: 2rem;
  color: var(--text-color);
  text-align: center;
}

h1 {
  font-family: 'Androgy Demo', sans-serif;
  color: var(--primary-color);
  font-size: 2.4rem;
  margin-bottom: 1.5rem;
}

#figure {
  width: 280px;
  height: 200px;
  margin: 0 auto 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Vignettes */
#tiles {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  justify-content: center;
  margin-bottom: 1.5rem;
}
.tile {
  background: var(--tile-bg);
  border: var(--tile-border);
  border-radius: var(--radius);
  padding: 0.6rem 1rem;
  cursor: grab;
  transition: transform var(--transition), background var(--transition);
  font-weight: 600;
  user-select: none;
}
.tile:hover {
  background: var(--primary-color);
  color: white;
  transform: translateY(-3px);
}

/* Zone de réponse */
#dropZone {
  min-height: 60px;
  border: 2px dashed var(--primary-color);
  border-radius: var(--radius);
  padding: 0.6rem;
  display: flex;
  gap: 0.6rem;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  background: white;
}
.drop-placeholder {
  color: #999;
  font-style: italic;
}

/* Bouton */
.btn {
  margin-top: 1.5rem;
  padding: 0.6rem 1.2rem;
  border: none;
  background: var(--primary-color);
  color: white;
  border-radius: var(--radius);
  font-size: 1rem;
  cursor: pointer;
  transition: background var(--transition);
}
.btn:hover { background: var(--accent); }

.feedback {
  margin-top: 1rem;
  font-weight: 700;
}
.feedback.ok { color: green; }
.feedback.bad { color: red; }
</style>
</head>
<body>

<h1>Formule d’Aire</h1>

<div id="figure"></div>

<div id="tiles">
  <div class="tile" draggable="true">Aire carré</div>
  <div class="tile" draggable="true">Aire rectangle</div>
  <div class="tile" draggable="true">Aire triangle</div>
  <div class="tile" draggable="true">Aire cercle</div>
  <div class="tile" draggable="true">Aire demi-cercle</div>
  <div class="tile" draggable="true">+</div>
  <div class="tile" draggable="true">−</div>
</div>

<div id="dropZone">
  <span class="drop-placeholder">Dépose ta formule ici</span>
</div>

<button class="btn" id="checkBtn">Valider</button>
<div class="feedback" id="feedback"></div>

<script>
// Figures SVG + formules associées
const figures = [
  {
    name: "Figure 1",
    formula: ["Aire rectangle", "+", "Aire demi-cercle", "+", "Aire demi-cercle"],
    svg: `
      <svg width="220" height="120" viewBox="0 0 220 120">
        <rect x="40" y="40" width="140" height="40" fill="#f6ef9f" />
        <path d="M40,60 a20,20 0 0,1 0,40 h0 a20,20 0 0,1 0,-40 z" fill="#f6ef9f"/>
        <path d="M180,100 a20,20 0 0,1 0,-40 h0 a20,20 0 0,1 0,40 z" fill="#f6ef9f"/>
      </svg>`
  },
  {
    name: "Figure 2",
    formula: ["Aire carré", "−", "Aire carré", "+", "Aire triangle"],
    svg: `
      <svg width="180" height="180" viewBox="0 0 180 180">
        <rect x="40" y="80" width="100" height="80" fill="#f6ef9f"/>
        <rect x="70" y="110" width="40" height="40" fill="white"/>
        <polygon points="40,80 90,20 140,80" fill="#f6ef9f"/>
      </svg>`
  },
  {
    name: "Figure 3",
    formula: ["Aire carré", "−", "Aire cercle"],
    svg: `
      <svg width="160" height="160" viewBox="0 0 160 160">
        <rect x="30" y="30" width="100" height="100" fill="#f6ef9f"/>
        <circle cx="80" cy="80" r="35" fill="white"/>
      </svg>`
  },
  {
    name: "Figure 4",
    formula: ["Aire carré", "−", "Aire carré", "+", "Aire demi-cercle"],
    svg: `
      <svg width="160" height="180" viewBox="0 0 160 180">
        <rect x="30" y="60" width="100" height="100" fill="#f6ef9f"/>
        <rect x="55" y="85" width="50" height="50" fill="white"/>
        <path d="M30,60 a50,50 0 0,1 100,0 z" fill="#f6ef9f"/>
      </svg>`
  }
];

// éléments HTML
const figureContainer = document.getElementById("figure");
const tiles = document.querySelectorAll(".tile");
const dropZone = document.getElementById("dropZone");
const feedback = document.getElementById("feedback");
const checkBtn = document.getElementById("checkBtn");

// Choisir une figure aléatoirement
const randomFigure = figures[Math.floor(Math.random() * figures.length)];
figureContainer.innerHTML = randomFigure.svg;

let dropped = [];

tiles.forEach(tile => {
  tile.addEventListener("dragstart", e => {
    e.dataTransfer.setData("text/plain", tile.textContent);
  });
});

dropZone.addEventListener("dragover", e => {
  e.preventDefault();
  dropZone.style.background = "#eaf3ff";
});
dropZone.addEventListener("dragleave", () => {
  dropZone.style.background = "white";
});
dropZone.addEventListener("drop", e => {
  e.preventDefault();
  dropZone.style.background = "white";
  const text = e.dataTransfer.getData("text/plain");
  if (text) {
    const span = document.createElement("span");
    span.textContent = text;
    span.className = "tile";
    dropZone.appendChild(span);
    dropped.push(text);
    dropZone.querySelector(".drop-placeholder")?.remove();
  }
});

checkBtn.addEventListener("click", () => {
  const solution = randomFigure.formula.join("");
  const answer = dropped.join("");
  if (answer === solution) {
    feedback.textContent = "✅ Bravo !";
    feedback.className = "feedback ok";
  } else {
    feedback.textContent = "❌ Essaie encore";
    feedback.className = "feedback bad";
  }
});
</script>

</body>
</html>
