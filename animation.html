<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calcul d'Aire - Formules</title>

<!-- Polices -->
<link href="https://fonts.googleapis.com/css2?family=Androgy+Demo&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Mabry+Pro&display=swap" rel="stylesheet" />

<style>
:root {
  --primary-color: #3a86ff;
  --background-color: #f0f4f8;
  --accent: #8338ec;
  --text-color: #212529;
  --tile-bg: white;
  --tile-border: 2px solid rgba(0,0,0,0.08);
  --radius: 10px;
  --transition: 0.25s ease;
  --yellow: #f6ef9f;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Mabry Pro', sans-serif;
  background: var(--background-color);
  padding: 2rem;
  color: var(--text-color);
  text-align: center;
}

h1 {
  font-family: 'Androgy Demo', sans-serif;
  color: var(--primary-color);
  font-size: 2.4rem;
  margin-bottom: 1.5rem;
}

/* FIGURE CONTAINER */
#figure {
  width: 240px;
  height: 180px;
  margin: 0 auto 2rem;
  position: relative;
}

/* Formes de base */
.shape {
  position: absolute;
  background: var(--yellow);
  left: 50%;
  transform: translateX(-50%);
}

/* Figure 1 : rectangle + 2 demi-cercles */
.figure1 .rect {
  width: 160px;
  height: 60px;
  top: 60px;
  border-radius: 0;
}
.figure1::before,
.figure1::after {
  content: "";
  position: absolute;
  width: 60px;
  height: 60px;
  background: var(--yellow);
  border-radius: 50%;
  top: 60px;
}
.figure1::before { left: 10px; clip-path: inset(0 30px 0 0); }
.figure1::after { right: 10px; clip-path: inset(0 0 0 30px); }

/* Figure 2 : carré - carré + triangle (maison) */
.figure2 .square {
  width: 100px;
  height: 100px;
  bottom: 10px;
  background: var(--yellow);
}
.figure2 .square::after {
  content: "";
  position: absolute;
  width: 40px;
  height: 40px;
  background: white;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
}
.figure2 .triangle {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  top: 10px;
  width: 0;
  height: 0;
  border-left: 60px solid transparent;
  border-right: 60px solid transparent;
  border-bottom: 70px solid var(--yellow);
}

/* Figure 3 : carré - cercle */
.figure3 .square {
  width: 120px;
  height: 120px;
  top: 30px;
  background: var(--yellow);
}
.figure3 .square::after {
  content: "";
  position: absolute;
  width: 60px;
  height: 60px;
  background: white;
  border-radius: 50%;
  top: 30px;
  left: 30px;
}

/* Figure 4 : carré - carré + demi-cercle */
.figure4 .square {
  width: 120px;
  height: 120px;
  bottom: 0;
  background: var(--yellow);
}
.figure4 .square::after {
  content: "";
  position: absolute;
  width: 50px;
  height: 50px;
  background: white;
  bottom: 35px;
  left: 35px;
}
.figure4::before {
  content: "";
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  height: 60px;
  background: var(--yellow);
  border-top-left-radius: 60px;
  border-top-right-radius: 60px;
}

/* Vignettes */
#tiles {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  justify-content: center;
  margin-bottom: 1.5rem;
}
.tile {
  background: var(--tile-bg);
  border: var(--tile-border);
  border-radius: var(--radius);
  padding: 0.6rem 1rem;
  cursor: grab;
  transition: transform var(--transition), background var(--transition);
  font-weight: 600;
  user-select: none;
}
.tile:hover {
  background: var(--primary-color);
  color: white;
  transform: translateY(-3px);
}

/* Zone de réponse */
#dropZone {
  min-height: 60px;
  border: 2px dashed var(--primary-color);
  border-radius: var(--radius);
  padding: 0.6rem;
  display: flex;
  gap: 0.6rem;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  background: white;
}
.drop-placeholder {
  color: #999;
  font-style: italic;
}

/* Bouton */
.btn {
  margin-top: 1.5rem;
  padding: 0.6rem 1.2rem;
  border: none;
  background: var(--primary-color);
  color: white;
  border-radius: var(--radius);
  font-size: 1rem;
  cursor: pointer;
  transition: background var(--transition);
}
.btn:hover { background: var(--accent); }

.feedback {
  margin-top: 1rem;
  font-weight: 700;
}
.feedback.ok { color: green; }
.feedback.bad { color: red; }
</style>
</head>
<body>

<h1>Formule d’Aire</h1>

<div id="figure"></div>

<div id="tiles">
  <div class="tile" draggable="true">Aire carré</div>
  <div class="tile" draggable="true">Aire rectangle</div>
  <div class="tile" draggable="true">Aire triangle</div>
  <div class="tile" draggable="true">Aire cercle</div>
  <div class="tile" draggable="true">Aire demi-cercle</div>
  <div class="tile" draggable="true">+</div>
  <div class="tile" draggable="true">−</div>
</div>

<div id="dropZone">
  <span class="drop-placeholder">Dépose ta formule ici</span>
</div>

<button class="btn" id="checkBtn">Valider</button>
<div class="feedback" id="feedback"></div>

<script>
// Les figures possibles
const figures = [
  { name: "figure1", formula: ["Aire rectangle", "+", "Aire demi-cercle", "+", "Aire demi-cercle"] },
  { name: "figure2", formula: ["Aire carré", "−", "Aire carré", "+", "Aire triangle"] },
  { name: "figure3", formula: ["Aire carré", "−", "Aire cercle"] },
  { name: "figure4", formula: ["Aire carré", "−", "Aire carré", "+", "Aire demi-cercle"] }
];

const figureContainer = document.getElementById("figure");
const tiles = document.querySelectorAll(".tile");
const dropZone = document.getElementById("dropZone");
const feedback = document.getElementById("feedback");
const checkBtn = document.getElementById("checkBtn");

// Choisir une figure au hasard
const randomFigure = figures[Math.floor(Math.random() * figures.length)];
figureContainer.className = randomFigure.name;

if (randomFigure.name === "figure1") {
  figureContainer.innerHTML = `<div class="shape rect"></div>`;
} else if (randomFigure.name === "figure2") {
  figureContainer.innerHTML = `<div class="square"></div><div class="triangle"></div>`;
} else if (randomFigure.name === "figure3") {
  figureContainer.innerHTML = `<div class="square"></div>`;
} else if (randomFigure.name === "figure4") {
  figureContainer.innerHTML = `<div class="square"></div>`;
}

let dropped = [];

tiles.forEach(tile => {
  tile.addEventListener("dragstart", e => {
    e.dataTransfer.setData("text/plain", tile.textContent);
  });
});

dropZone.addEventListener("dragover", e => {
  e.preventDefault();
  dropZone.style.background = "#eaf3ff";
});
dropZone.addEventListener("dragleave", () => {
  dropZone.style.background = "white";
});
dropZone.addEventListener("drop", e => {
  e.preventDefault();
  dropZone.style.background = "white";
  const text = e.dataTransfer.getData("text/plain");
  if (text) {
    const span = document.createElement("span");
    span.textContent = text;
    span.className = "tile";
    dropZone.appendChild(span);
    dropped.push(text);
    dropZone.querySelector(".drop-placeholder")?.remove();
  }
});

checkBtn.addEventListener("click", () => {
  const solution = randomFigure.formula.join("");
  const answer = dropped.join("");
  if (answer === solution) {
    feedback.textContent = "✅ Bravo !";
    feedback.className = "feedback ok";
  } else {
    feedback.textContent = "❌ Essaie encore";
    feedback.className = "feedback bad";
  }
});
</script>

</body>
</html>
