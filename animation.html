<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Formule d'Aire</title>

<link href="https://fonts.googleapis.com/css2?family=Androgy+Demo&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Mabry+Pro&display=swap" rel="stylesheet" />

<style>
:root {
  --primary-color: #3a86ff;
  --background-color: #f0f4f8;
  --accent-square: #3a86ff;
  --border-radius: 8px;
  --transition: 0.25s ease;
  --text-color: #212529;
}

* { box-sizing: border-box; }

body {
  font-family: 'Mabry Pro', sans-serif;
  background: var(--background-color);
  margin: 0;
  padding: 2rem;
  color: var(--text-color);
  text-align: center;
}

h1 {
  font-family: 'Androgy Demo', sans-serif;
  font-size: 2.4rem;
  color: var(--primary-color);
  margin: 0 0 1rem;
}

#figure {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 1rem auto;
  width: 200px;
  height: 160px;
  position: relative;
}

/* --- Formes géométriques simplifiées --- */
.shape {
  position: absolute;
  opacity: 0.9;
}

.rect {
  width: 200px;
  height: 100px;
  background: var(--accent-square);
  border-radius: 8px;
}

.half-circle {
  width: 100px;
  height: 50px;
  background: var(--accent-square);
  border-top-left-radius: 100px;
  border-top-right-radius: 100px;
  position: absolute;
  bottom: 100px;
  left: 50px;
}

/* --- Zone de formule --- */
#formulaZone {
  min-height: 80px;
  border: 2px dashed rgba(0,0,0,0.2);
  border-radius: var(--border-radius);
  margin: 1.2rem auto;
  width: 80%;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
  background: white;
  padding: 1rem;
  transition: border var(--transition);
}

#formulaZone.dragover {
  border-color: var(--primary-color);
}

/* --- Vignettes à glisser --- */
#pieces {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.piece {
  background: var(--primary-color);
  color: white;
  padding: 0.6rem 1rem;
  border-radius: var(--border-radius);
  cursor: grab;
  user-select: none;
  transition: transform var(--transition);
  font-size: 1rem;
}

.piece:hover {
  transform: scale(1.05);
}

/* --- Bouton et feedback --- */
.btn {
  padding: 0.6rem 1.1rem;
  border-radius: var(--border-radius);
  border: none;
  background: var(--primary-color);
  color: white;
  cursor: pointer;
  transition: background var(--transition);
  font-family: inherit;
  margin-top: 1rem;
}
.btn:hover { background: #8338ec; }

.feedback {
  height: 1.4rem;
  margin-top: 0.5rem;
  font-weight: 700;
}
.feedback.ok { color: green; }
.feedback.bad { color: red; }
</style>
</head>

<body>
<h1>Compose la Formule de l'Aire</h1>

<div id="figure">
  <div class="shape rect"></div>
  <div class="shape half-circle"></div>
</div>

<p>Glisse les bons éléments pour former la formule de l’aire :</p>

<div id="formulaZone" aria-label="zone de formule"></div>

<div id="pieces">
  <div class="piece" draggable="true">Aire rectangle</div>
  <div class="piece" draggable="true">Aire carré</div>
  <div class="piece" draggable="true">Aire triangle</div>
  <div class="piece" draggable="true">Aire cercle</div>
  <div class="piece" draggable="true">Aire demi-cercle</div>
  <div class="piece" draggable="true">+</div>
  <div class="piece" draggable="true">-</div>
</div>

<button id="checkBtn" class="btn">Valider</button>
<div id="feedback" class="feedback"></div>

<script>
const correctFormula = ["Aire rectangle", "+", "Aire demi-cercle"];
const formulaZone = document.getElementById('formulaZone');
const pieces = document.querySelectorAll('.piece');
const feedback = document.getElementById('feedback');

pieces.forEach(p => {
  p.addEventListener('dragstart', e => {
    e.dataTransfer.setData('text/plain', e.target.textContent);
  });
});

formulaZone.addEventListener('dragover', e => {
  e.preventDefault();
  formulaZone.classList.add('dragover');
});
formulaZone.addEventListener('dragleave', () => formulaZone.classList.remove('dragover'));

formulaZone.addEventListener('drop', e => {
  e.preventDefault();
  const text = e.dataTransfer.getData('text/plain');
  const el = document.createElement('div');
  el.className = 'piece';
  el.textContent = text;
  el.setAttribute('draggable', 'false');
  formulaZone.appendChild(el);
  formulaZone.classList.remove('dragover');
});

document.getElementById('checkBtn').addEventListener('click', () => {
  const current = Array.from(formulaZone.children).map(el => el.textContent.trim());
  if (JSON.stringify(current) === JSON.stringify(correctFormula)) {
    feedback.textContent = "✅ Correct !";
    feedback.className = "feedback ok";
  } else {
    feedback.textContent = "❌ Essaie encore";
    feedback.className = "feedback bad";
  }
});
</script>

</body>
</html>
